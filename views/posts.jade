doctype html
html(lang="ja")
head
  meta(charset="UTF-8")
  title 秘密の匿名掲示板
body
  h1 秘密の匿名掲示板
  a(href="/logout") ログアウト
  h2 新規投稿
  form(method="post", action="/posts")
    div
      textarea(name="content", cols=40, rows=4)
    div
      button(type="submit") 投稿

h2 投稿一覧
//jadeのiteration機能を用いて全ての投稿内容を表示
//https://pugjs.org/language/iteration.html
each post in posts
  if post.postedBy === 'admin'
    h3 #{post.id} : 管理人
  else
    h3 #{post.id} : ID:#{post.trackingCookie}
  p #{post.content}
  p 投稿日時: #{post.createdAt}
  //自分の投稿のみ削除フォームを表示
  //jadeは接頭に - をつければテンプレート内にjsが書ける　https://pugjs.org/language/code.html
  - var isDeletable = (user === post.postedBy || user === 'admin')
  //こっちはjsのif文ではなくjadeに備わっているif文　https://pugjs.org/language/conditionals.html
  if isDeletable
    form(method="post", action="/posts?delete=1")
      input(type="hidden", name="id", value="#{post.id}")
      button(type="submit") 削除
  hr
